{% extends 'shop/base.html' %}

{% block content %}

<h3 class="fw-bold mb-4">Our Collection</h3>

<!-- ðŸ” SEARCH BAR (ONLY ONCE) -->
<form method="get" class="mb-4">
  <div class="input-group">
    <input type="text"
           name="q"
           value="{{ query|default:'' }}"
           class="form-control"
           placeholder="Search by category or product name (jeans, kurti...)">
    <button class="btn btn-gradient btn-lgn">Search</button>
  </div>
</form>

<!-- ðŸ›ï¸ PRODUCTS -->
<div class="row g-4">

  {% for product in products %}
  <div class="col-12 col-md-6 col-lg-4">

    <a href="{% url 'shop:product_detail' product.id %}"
       class="text-decoration-none text-dark">

      <div class="card border-0 shadow-sm h-100 product-card">

        <img src="{{ product.image.url }}"
             class="card-img-top"
             style="height:350px; object-fit:contain; background:#f8f8f8;"
             alt="{{ product.name }}">

        <div class="card-body">
          <h6 class="fw-semibold">{{ product.name }}</h6>
          <p class="text-muted small">
            {{ product.description|truncatechars:80 }}
          </p>
          <p class="fw-bold">â‚¹ {{ product.price }}</p>
        </div>

      </div>

    </a>

  </div>
  {% empty %}
  <p class="text-muted">No products found.</p>
  {% endfor %}

</div>

{% endblock %}
