<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shopaholic</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-main: #f6f7fb;
      --bg-card: #ffffff;
      --text-main: #111;
      --text-muted: #666;
      --navbar-bg: #111;
      --maroon: #800020;
    }

    /* ‚úÖ DARK MODE VARIABLES */
    body.dark-mode {
      --bg-main: #0f0f0f;
      --bg-card: #1b1b1b;
      --text-main: #ffffff;
      --text-muted: #aaaaaa;
      --navbar-bg: #000;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      transition: all 0.3s ease;
    }

    .card {
      background: var(--bg-card);
      color: var(--text-main);
      transition: 0.3s;
    }

    .text-muted {
      color: var(--text-muted) !important;
    }

    /* ‚úÖ NAVBAR */
    .navbar {
      background: var(--navbar-bg);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    /* ‚úÖ NAV LINKS */
    .nav-link {
      color: white !important;
      margin-right: 18px;
      position: relative;
      font-weight: 500;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -5px;
      left: 0;
      background: var(--maroon);
      transition: width 0.3s ease;
    }

    .nav-link:hover::after {
      width: 100%;
    }

    /* ‚úÖ BUTTONS */
    .btn-maroon {
      background-color: var(--maroon);
      color: white;
      border: none;
      font-weight: 600;
      border-radius: 8px;
      padding: 10px 22px;
      transition: 0.3s;
    }

    .btn-maroon:hover {
      background-color: #5a0015;
      transform: translateY(-2px);
      color: white;
    }

    .btn-nav {
      background-color: var(--maroon);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 0.85rem;
    }

    .btn-nav:hover {
      background-color: #5a0015;
      color: white;
    }

    /* ‚úÖ PRODUCT CARD */
    .product-card {
      border-radius: 14px;
      transition: 0.3s;
    }

    .product-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 18px 40px rgba(0,0,0,0.15);
    }

    /* ‚úÖ FOOTER */
    footer {
      background: #111;
      color: #bbb;
      padding: 40px 0;
      margin-top: 80px;
    }

    /* ‚úÖ HERO IMAGE */
    .hero-section {
      background:
        linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
        url("/media/products/9760835.jpg");   /* ‚úÖ CHANGE IMAGE HERE */
      background-size: cover;
      background-position: center;
      border-radius: 18px;
      padding: 70px 40px;
      color: white;
    }

  </style>
</head>

<body>

<!-- ‚úÖ NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark px-4 py-3">
  <a class="navbar-brand fw-bold text-white" href="{% url 'shop:home' %}">
    Shopaholic
  </a>

  <div class="ms-auto d-flex align-items-center">

    {% if not user.is_superuser %}
    <form class="d-flex me-3" action="{% url 'shop:search' %}" method="get">
      <input class="form-control form-control-sm" type="search" name="q" placeholder="Search...">
    </form>
    {% endif %}

    {% if user.is_authenticated and user.is_superuser %}
      <a class="nav-link" href="{% url 'adminapp:dashboard' %}">Dashboard</a>
      <a class="btn btn-nav btn-sm me-2" href="{% url 'adminapp:admin_products' %}">
        Manage Products
      </a>
      <a class="btn btn-nav btn-sm" href="{% url 'userapp:logout' %}">
        Logout
      </a>

    {% else %}
      <a class="nav-link" href="{% url 'shop:home' %}">Home</a>
      <a class="nav-link" href="{% url 'shop:collection' %}">Collection</a>
      <a class="nav-link" href="{% url 'shop:about' %}">About</a>
      <a class="nav-link" href="{% url 'shop:contact' %}">Contact</a>

      {% if user.is_authenticated %}
        <span class="text-white me-2">Hi, {{ user.username }}</span>
        <a class="btn btn-nav btn-sm me-2" href="{% url 'shop:my_orders' %}">
          My Orders
        </a>
        <a class="btn btn-nav btn-sm me-2" href="{% url 'userapp:logout' %}">
          Logout
        </a>
      {% else %}
        <a class="btn btn-nav btn-sm me-2" href="{% url 'userapp:login' %}">
          Login
        </a>
        <a class="btn btn-nav btn-sm me-2" href="{% url 'adminapp:admin_login' %}">
          Admin Login
        </a>
      {% endif %}

      <a class="btn btn-nav btn-sm" href="{% url 'shop:view_cart' %}">
        üõí Cart
      </a>

      <!-- ‚úÖ THEME BUTTON -->
      <button id="themeToggle" class="btn btn-sm btn-nav ms-2">
        üåô
      </button>
    {% endif %}

  </div>
</nav>

<!-- ‚úÖ PAGE CONTENT -->
<div class="container my-5">
  {% block content %}{% endblock %}
</div>

<!-- ‚úÖ FOOTER -->
<footer>
  <div class="container text-center">
    <h5 class="fw-bold text-white">Shopaholic</h5>
    <p class="small">Fashion that defines your confidence</p>
    <p class="small mb-0">¬© 2026 Shopaholic</p>
  </div>
</footer>

<!-- ‚úÖ DARK MODE SCRIPT (FIXED) -->
<script>
document.addEventListener("DOMContentLoaded", function() {

  const toggleBtn = document.getElementById("themeToggle");
  const body = document.body;

  if (localStorage.getItem("theme") === "dark") {
      body.classList.add("dark-mode");
      toggleBtn.innerText = "‚òÄÔ∏è";
  }

  toggleBtn.onclick = () => {
      body.classList.toggle("dark-mode");

      if (body.classList.contains("dark-mode")) {
          localStorage.setItem("theme", "dark");
          toggleBtn.innerText = "‚òÄÔ∏è";
      } else {
          localStorage.setItem("theme", "light");
          toggleBtn.innerText = "üåô";
      }
  };

});
</script>

<!-- ‚úÖ VOICE SCRIPT -->
{% if speak %}
<script>
document.addEventListener("DOMContentLoaded", function() {

    const synth = window.speechSynthesis;
    const text = "Hi {{ user.username }}, welcome to Shopaholic!";

    const utter = new SpeechSynthesisUtterance(text);

    function setVoice() {
        const voices = synth.getVoices();

        utter.voice = voices.find(v =>
            v.name.includes("Female") ||
            v.name.includes("Zira") ||
            v.name.includes("Google UK English Female")
        );

        synth.speak(utter);
    }

    if (synth.getVoices().length) {
        setVoice();
    } else {
        synth.onvoiceschanged = setVoice;
    }

});
</script>
{% endif %}

</body>
</html>
